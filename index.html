<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.1.2/papaparse.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {
		'packages':['geochart'],
		// Note: you will need to get a mapsApiKey for your project.
		// See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings
		'mapsApiKey': 'AIzaSyDcM2rKNm7W8yfqIdzY8JInK-Gp4zV4alY'
	        });
	    
      function importCSV() {
	var file = "touristsDataClean.csv";
	var country_data = [['Country', 'Tourists']];
	// Load the csv file
	d3.csv(file, function (error, data) {		
		for (i = 0; i < data.length; i++) { 
			if (data[i]['Country'] != 'Other countries' && data[i]['Country'] != 'Not informed') {
				if (data[i]['Year'] == '1989'){
					country_data.push([data[i]['Country'], Number(data[i]['Count'])]);	
				}
			}
		}
		
      		google.charts.setOnLoadCallback(drawRegionsMap(country_data));
	});	 
      
      };
	      
      function drawRegionsMap(country_data) {
	      console.log(country_data.length);
	      console.log(country_data[0]);
	      console.log(country_data[1]);
        var data = google.visualization.arrayToDataTable(
          country_data
        );

        var options = {backgroundColor: '#212121',
		       colors: ['green', 'red']
		      };

        var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

        chart.draw(data, options);
	
      }
      importCSV();
	    		
    </script>
  </head>
  <body>
    <div id="regions_div" style="height: 100vh;"></div>
  </body>
</html>
